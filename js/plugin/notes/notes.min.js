var RevealNotes=function(){function openNotes(notesFilePath){if(!notesFilePath){var jsFileLocation=document.querySelector('script[src$="notes.js"]').src;jsFileLocation=jsFileLocation.replace(/notes\.js(\?.*)?$/,"");notesFilePath=jsFileLocation+"notes.html"}var notesPopup=window.open(notesFilePath,"reveal.js - Notes","width=1100,height=700");function connect(){var connectInterval=setInterval(function(){notesPopup.postMessage(JSON.stringify({namespace:"reveal-notes",type:"connect",url:window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,state:Reveal.getState()}),"*")},500);window.addEventListener("message",function(event){var data=JSON.parse(event.data);if(data&&data.namespace==="reveal-notes"&&data.type==="connected"){clearInterval(connectInterval);onConnected()}})}function post(){var slideElement=Reveal.getCurrentSlide(),notesElement=slideElement.querySelector("aside.notes");var messageData={namespace:"reveal-notes",type:"state",notes:"",markdown:false,whitespace:"normal",state:Reveal.getState()};if(slideElement.hasAttribute("data-notes")){messageData.notes=slideElement.getAttribute("data-notes");messageData.whitespace="pre-wrap"}if(notesElement){messageData.notes=notesElement.innerHTML;messageData.markdown=typeof notesElement.getAttribute("data-markdown")==="string"}notesPopup.postMessage(JSON.stringify(messageData),"*")}function onConnected(){Reveal.addEventListener("slidechanged",post);Reveal.addEventListener("fragmentshown",post);Reveal.addEventListener("fragmenthidden",post);Reveal.addEventListener("overviewhidden",post);Reveal.addEventListener("overviewshown",post);Reveal.addEventListener("paused",post);Reveal.addEventListener("resumed",post);post()}connect()}if(!/receiver/i.test(window.location.search)){if(window.location.search.match(/(\?|\&)notes/gi)!==null){openNotes()}document.addEventListener("keydown",function(event){if(document.querySelector(":focus")!==null||event.shiftKey||event.altKey||event.ctrlKey||event.metaKey)return;if(Reveal.getConfig().keyboard===false)return;if(event.keyCode===83){event.preventDefault();openNotes()}},false);if(window.Reveal)Reveal.registerKeyboardShortcut("S","Speaker notes view")}return{open:openNotes}}();